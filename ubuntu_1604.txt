apt update
apt upgrade
apt dist-upgrade
printf "[SeatDefaults]\nallow-guest=false\n" >> /etc/lightdm/lightdm.conf.d/50-no-guest.conf

# Instructions to install NVIDIA driver if needed
# run 'lspci | grep VGA' to get card info,
# ex output: 01:00.0 VGA compatible controller: NVIDIA Corporation G84 [GeForce 8600 GT] (rev a1)
# Use this info at http://www.nvidia.com/Download/index.aspx ie:
#   Product Type: GeForce
#   Product Series GeForce 8 Series
#   Product: GeForce 8600 GT
#   Operating System: Linux 64-bit
# click search and results are:
#   Version:	340.102
#   Release Date:	2017.2.14
#   Operating System:	Linux 64-bit
#   Language:	English (US)
#   File Size:	66.72 MB
# Using the major version number, run:
# apt install nvidia-340

## REBOOT ##

apt -y install indicator-multiload unity-tweak-tool
apt -y install vim git screen
apt -y install build-essential ruby ruby-dev pry
apt -y install libmysqlclient-dev mysql-client postgresql-client-common postgresql-client

# install chrome
apt -y install libindicator7 libappindicator1
dpkg -i google-chrome-stable_current_amd64.deb

apt autoremove

gem install rake pry aws-sdk sequel rubocop mysql2

# setup ssh links to open terminal
if [ "$(id -u)" != "0" ]; then
  echo "must run items below as non root"
  exit 1
fi
# single quotes around EOT will prevent variable interpretation
cat << 'EOT' >> ~/.local/share/applications/ssh.desktop
[Desktop Entry]
# run following after updating:
# xdg-mime default ssh.desktop x-scheme-handler/ssh
Version=1.0
Type=Application
Name=SSH Handler
Terminal=true
Exec=bash -c '(URL="%U" HOST="${URL#ssh://}"; ssh $HOST)'
Icon=utilities-terminal
StartupNotify=false
MimeType=x-scheme-handler/ssh;
EOT

xdg-mime default ssh.desktop x-scheme-handler/ssh
